<!DOCTYPE html>
<link rel="stylesheet" href="/assets/css/syntax.css" type="text/css" />
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Installing Private Packages in Docker Image - Notes</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Installing Private Packages in Docker Image - Notes" />
<meta name="author" content="Dimitar Ganev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Quick notes about how to forward an ssh agent and other tricks regarding the installation of python packages." />
<meta property="og:description" content="Quick notes about how to forward an ssh agent and other tricks regarding the installation of python packages." />
<link rel="canonical" href="http://localhost:4000/post/2021/05/27/installing-private-packages-in-docker-image-notes.html" />
<meta property="og:url" content="http://localhost:4000/post/2021/05/27/installing-private-packages-in-docker-image-notes.html" />
<meta property="og:site_name" content="archive://syl" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-27T00:00:00+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Installing Private Packages in Docker Image - Notes" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Dimitar Ganev"},"@type":"BlogPosting","description":"Quick notes about how to forward an ssh agent and other tricks regarding the installation of python packages.","headline":"Installing Private Packages in Docker Image - Notes","dateModified":"2021-05-27T00:00:00+03:00","datePublished":"2021-05-27T00:00:00+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/post/2021/05/27/installing-private-packages-in-docker-image-notes.html"},"url":"http://localhost:4000/post/2021/05/27/installing-private-packages-in-docker-image-notes.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="archive://syl" /><link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
  <link rel="stylesheet" href="/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/">..</a><article>
  <p class="post-meta">
    <time datetime="2021-05-27 00:00:00 +0300">2021-05-27</time>
  </p>
  
  <h1>Installing Private Packages in Docker Image - Notes</h1>

  <p>Quick notes about how to forward an ssh agent and other tricks regarding the installation of python packages.</p>

<h2 id="using-ssh-forwarding">Using SSH Forwarding</h2>

<p>Exporting the <code class="language-plaintext highlighter-rouge">$SSH_AUTH_SOCK</code> environment variable in the image.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -rm -t -i -v $(dirname $SSH_AUTH_SOCK) -e SSH_AUTH_SOCK=$SSH_AUTH_SOCK ubuntu /bin/bash
</code></pre></div></div>

<p>Or in the <code class="language-plaintext highlighter-rouge">environment</code> section of a compose file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>environment:
  SSH_AUTH_SOCK: $SSH_AUTH_SOCK
</code></pre></div></div>

<h3 id="eventual-issues-with-that">Eventual Issues with that</h3>

<ul>
  <li>Installing ssh in the container</li>
  <li>Adding entries to <code class="language-plaintext highlighter-rouge">/etc/ssh/ssh_known_hosts</code></li>
</ul>

<h3 id="caveats">Caveats</h3>

<ul>
  <li>Traces of ssh keys inside the image</li>
</ul>

<h2 id="references">References</h2>
<ul>
  <li>https://gist.github.com/d11wtq/8699521</li>
  <li>https://vsupalov.com/build-docker-image-clone-private-repo-ssh-key/</li>
  <li>https://medium.com/@bmihelac/examples-for-building-docker-images-with-private-python-packages-6314440e257c</li>
</ul>

</article>
      </div>
    </main>
  </body>
</html>