<!DOCTYPE html>
<link rel="stylesheet" href="/assets/css/syntax.css" type="text/css" />
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Create Plugin Architecture With Python</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Create Plugin Architecture With Python" />
<meta name="author" content="Dimitar Ganev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="There are some use-cases where a plugin architecture is needed, I call this “code” plugins but it is quite possible that there is already a word for that. The idea is to ‘load’ functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I’ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator." />
<meta property="og:description" content="There are some use-cases where a plugin architecture is needed, I call this “code” plugins but it is quite possible that there is already a word for that. The idea is to ‘load’ functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I’ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator." />
<link rel="canonical" href="http://localhost:4000/post/2022/05/23/create-plugin-architecture-with-python.html" />
<meta property="og:url" content="http://localhost:4000/post/2022/05/23/create-plugin-architecture-with-python.html" />
<meta property="og:site_name" content="archive://syl" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-23T00:00:00+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Create Plugin Architecture With Python" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Dimitar Ganev"},"@type":"BlogPosting","description":"There are some use-cases where a plugin architecture is needed, I call this “code” plugins but it is quite possible that there is already a word for that. The idea is to ‘load’ functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I’ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator.","headline":"Create Plugin Architecture With Python","dateModified":"2022-05-23T00:00:00+03:00","datePublished":"2022-05-23T00:00:00+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/post/2022/05/23/create-plugin-architecture-with-python.html"},"url":"http://localhost:4000/post/2022/05/23/create-plugin-architecture-with-python.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="archive://syl" /><link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
  <link rel="stylesheet" href="/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/">..</a><article>
  <p class="post-meta">
    <time datetime="2022-05-23 00:00:00 +0300">2022-05-23</time>
  </p>
  
  <h1>Create Plugin Architecture With Python</h1>

  <p>There are some use-cases where a plugin architecture is needed, I call this “code” plugins but it is quite possible that there is already a word for that. The idea is to ‘load’ functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I’ve created 2 solutions for that matter one that is using the <code class="language-plaintext highlighter-rouge">__subclasses__</code> dunder method and one using a decorator.</p>

<h1 id="solution-1">Solution 1</h1>

<p>Repository: https://github.com/syrull/plugin-arch-python/tree/main/Solution-1</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SOLUTION-1
│   configuration.py
│   main.py
│   README.md
│   setup.py
│
└───actions
        action_example1.py
        action_example2.py
        __init__.py
</code></pre></div></div>

<p>Loading the <code class="language-plaintext highlighter-rouge">__subclasses__</code> of the <code class="language-plaintext highlighter-rouge">BaseAction</code> class and creating a ‘pluggable’ classes. The actions can be specified in the <code class="language-plaintext highlighter-rouge">configuration.py</code> file in the <code class="language-plaintext highlighter-rouge">ACTIONS</code> const. This method is inspired by django’s <code class="language-plaintext highlighter-rouge">INSTALLED_APPS</code> method.</p>

<p>The <code class="language-plaintext highlighter-rouge">call</code> method is a placeholder for the “actions”.</p>

<h2 id="to-register-an-action">To Register an action</h2>

<ul>
  <li>New python file in <code class="language-plaintext highlighter-rouge">actions/</code> folder</li>
  <li>Create a class with an appropriate name (ex. <code class="language-plaintext highlighter-rouge">ClickAction</code>)</li>
  <li>Extend the class with <code class="language-plaintext highlighter-rouge">BaseAction</code></li>
  <li>Add an entry to <code class="language-plaintext highlighter-rouge">ACTIONS</code> const located in <code class="language-plaintext highlighter-rouge">configuration.py</code> file with the approriate path to the module</li>
</ul>

<p>After that the function will be available at the <code class="language-plaintext highlighter-rouge">register</code> in the <code class="language-plaintext highlighter-rouge">main.py</code> file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">python</span> <span class="n">main</span><span class="p">.</span><span class="n">py</span>
<span class="p">[</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">actions</span><span class="p">.</span><span class="n">action_example1</span><span class="p">.</span><span class="n">Example1Action</span><span class="s">'&gt;, &lt;class '</span><span class="n">actions</span><span class="p">.</span><span class="n">action_example2</span><span class="p">.</span><span class="n">Example2Action</span><span class="s">'&gt;]
</span></code></pre></div></div>

<h2 id="benchmarks">Benchmarks</h2>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Measure-Command</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="o">.</span><span class="nx">\main.py</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="n">Days</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="nx">0</span><span class="w">
</span><span class="n">Hours</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="nx">0</span><span class="w">
</span><span class="n">Minutes</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="nx">0</span><span class="w">
</span><span class="n">Seconds</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="nx">0</span><span class="w">
</span><span class="n">Milliseconds</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="nx">24</span><span class="w">
</span><span class="n">Ticks</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="nx">240745</span><span class="w">
</span><span class="n">TotalDays</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="nx">2.78640046296296E-07</span><span class="w">
</span><span class="n">TotalHours</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="nx">6.68736111111111E-06</span><span class="w">
</span><span class="n">TotalMinutes</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="nx">0.000401241666666667</span><span class="w">
</span><span class="n">TotalSeconds</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="nx">0.0240745</span><span class="w">
</span><span class="n">TotalMilliseconds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">24.0745</span><span class="w">
</span></code></pre></div></div>

<h1 id="solution-2">Solution 2</h1>

<p>Repository: https://github.com/syrull/plugin-arch-python/tree/main/Solution-2</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SOLUTION-2
│   main.py
│   README.md
│   register.py
│
└───actions
        action_example1.py
        action_example2.py
        __init__.py
</code></pre></div></div>

<p>The benefits of this solution are that we have a control over the decorator and we can pass some custom <code class="language-plaintext highlighter-rouge">*args, **kwargs</code> to the decorated functions.</p>

<h2 id="to-register-an-action-1">To Register an action</h2>

<ul>
  <li>New python file in <code class="language-plaintext highlighter-rouge">actions/</code> folder</li>
  <li>Create function with an appropriate name (ex. <code class="language-plaintext highlighter-rouge">action_onclick</code>)</li>
  <li>Decorate the function with <code class="language-plaintext highlighter-rouge">register_action</code> decorator</li>
  <li>Export the function in the <code class="language-plaintext highlighter-rouge">__all__</code> method in <code class="language-plaintext highlighter-rouge">actions/__init__.py</code> file</li>
</ul>

<p>After that the function will be available at the <code class="language-plaintext highlighter-rouge">register</code> in the <code class="language-plaintext highlighter-rouge">main.py</code> file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">python</span> <span class="n">main</span><span class="p">.</span><span class="n">py</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">function</span> <span class="n">action_example1</span> <span class="n">at</span> <span class="mh">0x000001CC3F88D310</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">action_example2</span> <span class="n">at</span> <span class="mh">0x000001CC3F88D3A0</span><span class="o">&gt;</span><span class="p">]</span>
</code></pre></div></div>

<h2 id="benchmarks-1">Benchmarks</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Measure-Command { python .\main.py }

Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 0
Milliseconds      : 22
Ticks             : 227803
TotalDays         : 2.6366087962963E-07
TotalHours        : 6.32786111111111E-06
TotalMinutes      : 0.000379671666666667
TotalSeconds      : 0.0227803
TotalMilliseconds : 22.7803
</span></code></pre></div></div>

</article>
      </div>
    </main>
  </body>
</html>