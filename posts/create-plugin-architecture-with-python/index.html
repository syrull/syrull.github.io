<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Create Plugin Architecture With Python | 0x73796C31</title><meta name=keywords content><meta name=description content="There are some use-cases where a plugin architecture is needed, I call this &ldquo;code&rdquo; plugins but it is quite possible that there is already a word for that. The idea is to &rsquo;load&rsquo; functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I&rsquo;ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator."><meta name=author content="Dimitar Ganev"><link rel=canonical href=https://sy1.sh/posts/create-plugin-architecture-with-python/><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://sy1.sh/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://sy1.sh/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://sy1.sh/favicon-32x32.png><link rel=apple-touch-icon href=https://sy1.sh/apple-touch-icon.png><link rel=mask-icon href=https://sy1.sh/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Create Plugin Architecture With Python"><meta property="og:description" content="There are some use-cases where a plugin architecture is needed, I call this &ldquo;code&rdquo; plugins but it is quite possible that there is already a word for that. The idea is to &rsquo;load&rsquo; functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I&rsquo;ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator."><meta property="og:type" content="article"><meta property="og:url" content="https://sy1.sh/posts/create-plugin-architecture-with-python/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-23T21:44:27+03:00"><meta property="article:modified_time" content="2022-05-23T21:44:27+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Create Plugin Architecture With Python"><meta name=twitter:description content="There are some use-cases where a plugin architecture is needed, I call this &ldquo;code&rdquo; plugins but it is quite possible that there is already a word for that. The idea is to &rsquo;load&rsquo; functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I&rsquo;ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://sy1.sh/posts/"},{"@type":"ListItem","position":3,"name":"Create Plugin Architecture With Python","item":"https://sy1.sh/posts/create-plugin-architecture-with-python/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Create Plugin Architecture With Python","name":"Create Plugin Architecture With Python","description":"There are some use-cases where a plugin architecture is needed, I call this \u0026ldquo;code\u0026rdquo; plugins but it is quite possible that there is already a word for that. The idea is to \u0026rsquo;load\u0026rsquo; functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I\u0026rsquo;ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator.","keywords":[],"articleBody":"There are some use-cases where a plugin architecture is needed, I call this “code” plugins but it is quite possible that there is already a word for that. The idea is to ’load’ functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I’ve created 2 solutions for that matter one that is using the __subclasses__ dunder method and one using a decorator.\nSolution 1 Repository: https://github.com/syrull/plugin-arch-python/tree/main/Solution-1\nSOLUTION-1 │ configuration.py │ main.py │ README.md │ setup.py │ └───actions action_example1.py action_example2.py __init__.py Loading the __subclasses__ of the BaseAction class and creating a ‘pluggable’ classes. The actions can be specified in the configuration.py file in the ACTIONS const. This method is inspired by django’s INSTALLED_APPS method.\nThe call method is a placeholder for the “actions”.\nTo Register an action New python file in actions/ folder Create a class with an appropriate name (ex. ClickAction) Extend the class with BaseAction Add an entry to ACTIONS const located in configuration.py file with the approriate path to the module After that the function will be available at the register in the main.py file.\n$ python main.py [","wordCount":"373","inLanguage":"en","datePublished":"2022-05-23T21:44:27+03:00","dateModified":"2022-05-23T21:44:27+03:00","author":{"@type":"Person","name":"Dimitar Ganev"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sy1.sh/posts/create-plugin-architecture-with-python/"},"publisher":{"@type":"Organization","name":"0x73796C31","logo":{"@type":"ImageObject","url":"https://sy1.sh/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sy1.sh accesskey=h title="0x73796C31 (Alt + H)">0x73796C31</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sy1.sh/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://sy1.sh/cv title=CV><span>CV</span></a></li><li><a href=https://sy1.sh/writeups/ title=Write-ups><span>Write-ups</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sy1.sh>Home</a>&nbsp;»&nbsp;<a href=https://sy1.sh/posts/>Posts</a></div><h1 class=post-title>Create Plugin Architecture With Python</h1><div class=post-meta><span title='2022-05-23 21:44:27 +0300 +0300'>2022-05-23</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Dimitar Ganev</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#solution-1 aria-label="Solution 1">Solution 1</a><ul><li><a href=#to-register-an-action aria-label="To Register an action">To Register an action</a></li><li><a href=#benchmarks aria-label=Benchmarks>Benchmarks</a></li></ul></li><li><a href=#solution-2 aria-label="Solution 2">Solution 2</a><ul><li><a href=#to-register-an-action-1 aria-label="To Register an action">To Register an action</a></li><li><a href=#benchmarks-1 aria-label=Benchmarks>Benchmarks</a></li></ul></li></ul></div></details></div><div class=post-content><p>There are some use-cases where a plugin architecture is needed, I call this &ldquo;code&rdquo; plugins but it is quite possible that there is already a word for that. The idea is to &rsquo;load&rsquo; functions or classes that are dynamically created so that you can have the reference to the instances at runtime. I&rsquo;ve created 2 solutions for that matter one that is using the <code>__subclasses__</code> dunder method and one using a decorator.</p><h1 id=solution-1>Solution 1<a hidden class=anchor aria-hidden=true href=#solution-1>#</a></h1><p>Repository: <a href=https://github.com/syrull/plugin-arch-python/tree/main/Solution-1>https://github.com/syrull/plugin-arch-python/tree/main/Solution-1</a></p><pre tabindex=0><code class=language-tree data-lang=tree>SOLUTION-1
│   configuration.py
│   main.py
│   README.md
│   setup.py
│
└───actions
        action_example1.py
        action_example2.py
        __init__.py
</code></pre><p>Loading the <code>__subclasses__</code> of the <code>BaseAction</code> class and creating a &lsquo;pluggable&rsquo; classes. The actions can be specified in the <code>configuration.py</code> file in the <code>ACTIONS</code> const. This method is inspired by django&rsquo;s <code>INSTALLED_APPS</code> method.</p><p>The <code>call</code> method is a placeholder for the &ldquo;actions&rdquo;.</p><h2 id=to-register-an-action>To Register an action<a hidden class=anchor aria-hidden=true href=#to-register-an-action>#</a></h2><ul><li>New python file in <code>actions/</code> folder</li><li>Create a class with an appropriate name (ex. <code>ClickAction</code>)</li><li>Extend the class with <code>BaseAction</code></li><li>Add an entry to <code>ACTIONS</code> const located in <code>configuration.py</code> file with the approriate path to the module</li></ul><p>After that the function will be available at the <code>register</code> in the <code>main.py</code> file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> python main.py
</span></span><span class=line><span class=cl><span class=go>[&lt;class &#39;actions.action_example1.Example1Action&#39;&gt;, &lt;class &#39;actions.action_example2.Example2Action&#39;&gt;]
</span></span></span></code></pre></div><h2 id=benchmarks>Benchmarks<a hidden class=anchor aria-hidden=true href=#benchmarks>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>Measure-Command { python .\main.py }
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>Days              : 0
</span></span></span><span class=line><span class=cl><span class=go>Hours             : 0
</span></span></span><span class=line><span class=cl><span class=go>Minutes           : 0
</span></span></span><span class=line><span class=cl><span class=go>Seconds           : 0
</span></span></span><span class=line><span class=cl><span class=go>Milliseconds      : 24
</span></span></span><span class=line><span class=cl><span class=go>Ticks             : 240745
</span></span></span><span class=line><span class=cl><span class=go>TotalDays         : 2.78640046296296E-07
</span></span></span><span class=line><span class=cl><span class=go>TotalHours        : 6.68736111111111E-06
</span></span></span><span class=line><span class=cl><span class=go>TotalMinutes      : 0.000401241666666667
</span></span></span><span class=line><span class=cl><span class=go>TotalSeconds      : 0.0240745
</span></span></span><span class=line><span class=cl><span class=go>TotalMilliseconds : 24.0745
</span></span></span></code></pre></div><h1 id=solution-2>Solution 2<a hidden class=anchor aria-hidden=true href=#solution-2>#</a></h1><p>Repository: <a href=https://github.com/syrull/plugin-arch-python/tree/main/Solution-2>https://github.com/syrull/plugin-arch-python/tree/main/Solution-2</a></p><pre tabindex=0><code class=language-tree data-lang=tree>SOLUTION-2
│   main.py
│   README.md
│   register.py
│
└───actions
        action_example1.py
        action_example2.py
        __init__.py
</code></pre><p>The benefits of this solution are that we have a control over the decorator and we can pass some custom <code>*args, **kwargs</code> to the decorated functions.</p><h2 id=to-register-an-action-1>To Register an action<a hidden class=anchor aria-hidden=true href=#to-register-an-action-1>#</a></h2><ul><li>New python file in <code>actions/</code> folder</li><li>Create function with an appropriate name (ex. <code>action_onclick</code>)</li><li>Decorate the function with <code>register_action</code> decorator</li><li>Export the function in the <code>__all__</code> method in <code>actions/__init__.py</code> file</li></ul><p>After that the function will be available at the <code>register</code> in the <code>main.py</code> file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> python main.py
</span></span><span class=line><span class=cl><span class=go>[&lt;function action_example1 at 0x000001CC3F88D310&gt;, &lt;function action_example2 at 0x000001CC3F88D3A0&gt;]
</span></span></span></code></pre></div><h2 id=benchmarks-1>Benchmarks<a hidden class=anchor aria-hidden=true href=#benchmarks-1>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>Measure-Command { python .\main.py }
</span></span></span><span class=line><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=go>Days              : 0
</span></span></span><span class=line><span class=cl><span class=go>Hours             : 0
</span></span></span><span class=line><span class=cl><span class=go>Minutes           : 0
</span></span></span><span class=line><span class=cl><span class=go>Seconds           : 0
</span></span></span><span class=line><span class=cl><span class=go>Milliseconds      : 22
</span></span></span><span class=line><span class=cl><span class=go>Ticks             : 227803
</span></span></span><span class=line><span class=cl><span class=go>TotalDays         : 2.6366087962963E-07
</span></span></span><span class=line><span class=cl><span class=go>TotalHours        : 6.32786111111111E-06
</span></span></span><span class=line><span class=cl><span class=go>TotalMinutes      : 0.000379671666666667
</span></span></span><span class=line><span class=cl><span class=go>TotalSeconds      : 0.0227803
</span></span></span><span class=line><span class=cl><span class=go>TotalMilliseconds : 22.7803
</span></span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://sy1.sh/posts/legiontd2-sdk/><span class=title>« Prev</span><br><span>LegionTD2 Go SDK (v0.2.0)</span></a>
<a class=next href=https://sy1.sh/posts/simple-fishing-bot/><span class=title>Next »</span><br><span>Simple Fishing Bot for World of Warcraft</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://sy1.sh>0x73796C31</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>