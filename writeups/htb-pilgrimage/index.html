<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hack The Box - Pilgrimage [Easy] | 0x73796C31</title><meta name=keywords content="hackthebox"><meta name=description content="I started off with rustscan
$ rustscan -a Open 10.10.11.219:22 Open 10.10.11.219:80 Then I ran ffuf to brute force some directories.
$ ffuf -u http://10.10.11.219/FUZZ -w ~/tools/SecLists/Discovery/Web-Content/common.txt That yielded the .git folders, I used git-dumper to dump the whole repository. Upon investigating the source code of the application, I&rsquo;ve noticed a user called emily. I also discovered an executable magick and this fragmet of code:
$newname = uniqid(); exec(&#34;/var/www/pilgrimage.htb/magick convert /var/www/pilgrimage."><meta name=author content="Dimitar Ganev"><link rel=canonical href=https://sy1.sh/writeups/htb-pilgrimage/><link crossorigin=anonymous href=/assets/css/stylesheet.f8c2ee4fde28779dff9afcd3046f6bd6fc9cbeb1ddf60d48a81b676d7162c1bb.css integrity="sha256-+MLuT94od53/mvzTBG9r1vycvrHd9g1IqBtnbXFiwbs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://sy1.sh/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://sy1.sh/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://sy1.sh/favicon-32x32.png><link rel=apple-touch-icon href=https://sy1.sh/apple-touch-icon.png><link rel=mask-icon href=https://sy1.sh/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hack The Box - Pilgrimage [Easy]"><meta property="og:description" content="I started off with rustscan
$ rustscan -a Open 10.10.11.219:22 Open 10.10.11.219:80 Then I ran ffuf to brute force some directories.
$ ffuf -u http://10.10.11.219/FUZZ -w ~/tools/SecLists/Discovery/Web-Content/common.txt That yielded the .git folders, I used git-dumper to dump the whole repository. Upon investigating the source code of the application, I&rsquo;ve noticed a user called emily. I also discovered an executable magick and this fragmet of code:
$newname = uniqid(); exec(&#34;/var/www/pilgrimage.htb/magick convert /var/www/pilgrimage."><meta property="og:type" content="article"><meta property="og:url" content="https://sy1.sh/writeups/htb-pilgrimage/"><meta property="article:section" content="writeups"><meta property="article:published_time" content="2023-06-25T10:42:27+03:00"><meta property="article:modified_time" content="2023-06-25T10:42:27+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hack The Box - Pilgrimage [Easy]"><meta name=twitter:description content="I started off with rustscan
$ rustscan -a Open 10.10.11.219:22 Open 10.10.11.219:80 Then I ran ffuf to brute force some directories.
$ ffuf -u http://10.10.11.219/FUZZ -w ~/tools/SecLists/Discovery/Web-Content/common.txt That yielded the .git folders, I used git-dumper to dump the whole repository. Upon investigating the source code of the application, I&rsquo;ve noticed a user called emily. I also discovered an executable magick and this fragmet of code:
$newname = uniqid(); exec(&#34;/var/www/pilgrimage.htb/magick convert /var/www/pilgrimage."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Writeups","item":"https://sy1.sh/writeups/"},{"@type":"ListItem","position":3,"name":"Hack The Box - Pilgrimage [Easy]","item":"https://sy1.sh/writeups/htb-pilgrimage/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hack The Box - Pilgrimage [Easy]","name":"Hack The Box - Pilgrimage [Easy]","description":"I started off with rustscan\n$ rustscan -a Open 10.10.11.219:22 Open 10.10.11.219:80 Then I ran ffuf to brute force some directories.\n$ ffuf -u http://10.10.11.219/FUZZ -w ~/tools/SecLists/Discovery/Web-Content/common.txt That yielded the .git folders, I used git-dumper to dump the whole repository. Upon investigating the source code of the application, I\u0026rsquo;ve noticed a user called emily. I also discovered an executable magick and this fragmet of code:\n$newname = uniqid(); exec(\u0026#34;/var/www/pilgrimage.htb/magick convert /var/www/pilgrimage.","keywords":["hackthebox"],"articleBody":"I started off with rustscan\n$ rustscan -a Open 10.10.11.219:22 Open 10.10.11.219:80 Then I ran ffuf to brute force some directories.\n$ ffuf -u http://10.10.11.219/FUZZ -w ~/tools/SecLists/Discovery/Web-Content/common.txt That yielded the .git folders, I used git-dumper to dump the whole repository. Upon investigating the source code of the application, I’ve noticed a user called emily. I also discovered an executable magick and this fragmet of code:\n$newname = uniqid(); exec(\"/var/www/pilgrimage.htb/magick convert /var/www/pilgrimage.htb/tmp/\" . $upload-\u003egetName() . $mime . \" -resize 50% /var/www/pilgrimage.htb/shrunk/\" . $newname . $mime); unlink($upload-\u003egetFullPath()); The program seems to be invoking this binary to shrink the image that is being uploaded through the website, the program itself is ImageMagick 7.1.0-49 beta we discover that by invoking it with -version.\n$ ./magick -version Version: ImageMagick 7.1.0-49 beta Q16-HDRI x86_64 c243c9281:20220911 https://imagemagick.org Copyright: (C) 1999 ImageMagick Studio LLC License: https://imagemagick.org/script/license.php Features: Cipher DPC HDRI OpenMP(4.5) Delegates (built-in): bzlib djvu fontconfig freetype jbig jng jpeg lcms lqr lzma openexr png raqm tiff webp x xml zlib Compiler: gcc (7.5) This version is vulnerable to Arbitrary Remote Leak, https://www.metabaseq.com/imagemagick-zero-days/.\nFurthermore, we notice some files of interest in the source code as well, such as the database file.\n$db = new PDO('sqlite:/var/db/pilgrimage'); Exploiting I’ve used this PoC to generate my payload: https://github.com/Sybil-Scan/imagemagick-lfi-poc\nI’ve crafted my malicious image to read the database file /var/db/pilgrimage and shrink it through the website, I’ve then downloaded the file and converted the bytes, opened it and after some digging I found the password for user emiliy. Then you can login with ssh.\nGetting root I’ve used linpeas.sh to enumerate the system, and I’ve noticed a process running:\nroot 726 0.0 0.0 6816 3072 ? Ss 15:00 0:00 /bin/bash /usr/sbin/malwarescan.sh I checked the permissions of the script:\nemily@pilgrimage:~$ ls -la /usr/sbin/malwarescan.sh -rwxr--r-- 1 root root 474 Jun 1 19:14 /usr/sbin/malwarescan.sh And then I saw the script itself:\nemily@pilgrimage:~$ cat /usr/sbin/malwarescan.sh #!/bin/bash blacklist=(\"Executable script\" \"Microsoft executable\") /usr/bin/inotifywait -m -e create /var/www/pilgrimage.htb/shrunk/ | while read FILE; do filename=\"/var/www/pilgrimage.htb/shrunk/$(/usr/bin/echo \"$FILE\" | /usr/bin/tail -n 1 | /usr/bin/sed -n -e 's/^.*CREATE //p')\" binout=\"$(/usr/local/bin/binwalk -e \"$filename\")\" for banned in \"${blacklist[@]}\"; do if [[ \"$binout\" == *\"$banned\"* ]]; then /usr/bin/rm \"$filename\" break fi done done This script seems to be invoking binwalk, I searched for some exploits and I found this one: https://www.exploit-db.com/exploits/51249 following the steps in the exploit, I’ve set up a listener and placed the malicious png crafted by the exploit in the /var/www/pilgrimage.htb/shrunk/ directory.\nemily@pilgrimage:/tmp/syl$ cp ./binwalk_exploit.png /var/www/pilgrimage.htb/shrunk/ After a couple of seconds, my listener got a connection, which was with root privileges.\nConclusions I wanted to investigate a little further how the magick binary includes the file that it converts and this article explains it perfectly.\nhttps://www.metabaseq.com/imagemagick-zero-days/\nThe exploit targets the tEXt chunk of the PNG file, and this chunk is being used for storing key-value metadata for the PNG file. The problem comes whenever you use the “profile” string into that metadata, if that is being used as “key” the “value” is being interpreted as a filename, that then the functions FileToStringInfo → FileToBlob will fetch from the system, and it will populate the “value” with the file’s contents.\nAnd to add some speculation on top of it, this almost feels like a backdoor ;).\n","wordCount":"532","inLanguage":"en","datePublished":"2023-06-25T10:42:27+03:00","dateModified":"2023-06-25T10:42:27+03:00","author":{"@type":"Person","name":"Dimitar Ganev"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sy1.sh/writeups/htb-pilgrimage/"},"publisher":{"@type":"Organization","name":"0x73796C31","logo":{"@type":"ImageObject","url":"https://sy1.sh/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sy1.sh accesskey=h title="0x73796C31 (Alt + H)">0x73796C31</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sy1.sh/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://sy1.sh/cv title=CV><span>About</span></a></li><li><a href=https://sy1.sh/writeups/ title=Write-ups><span>Write-ups</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sy1.sh>Home</a>&nbsp;»&nbsp;<a href=https://sy1.sh/writeups/>Writeups</a></div><h1 class=post-title>Hack The Box - Pilgrimage [Easy]</h1><div class=post-meta><span title='2023-06-25 10:42:27 +0300 +0300'>June 25, 2023</span>&nbsp;·&nbsp;3 min</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#exploiting aria-label=Exploiting>Exploiting</a></li><li><a href=#getting-root aria-label="Getting root">Getting root</a></li><li><a href=#conclusions aria-label=Conclusions>Conclusions</a></li></ul></div></details></div><div class=post-content><p>I started off with <code>rustscan</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ rustscan -a 
</span></span><span class=line><span class=cl>Open 10.10.11.219:22
</span></span><span class=line><span class=cl>Open 10.10.11.219:80
</span></span></code></pre></div><p>Then I ran <code>ffuf</code> to brute force some directories.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ffuf -u http://10.10.11.219/FUZZ -w ~/tools/SecLists/Discovery/Web-Content/common.txt
</span></span></code></pre></div><p>That yielded the <code>.git</code> folders, I used <code>git-dumper</code> to dump the whole repository. Upon investigating the source code of the application, I&rsquo;ve noticed a user called <code>emily</code>. I also discovered an executable <code>magick</code> and this fragmet of code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$newname</span> <span class=o>=</span> <span class=nx>uniqid</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>exec</span><span class=p>(</span><span class=s2>&#34;/var/www/pilgrimage.htb/magick convert /var/www/pilgrimage.htb/tmp/&#34;</span> <span class=o>.</span> <span class=nv>$upload</span><span class=o>-&gt;</span><span class=na>getName</span><span class=p>()</span> <span class=o>.</span> <span class=nv>$mime</span> <span class=o>.</span> <span class=s2>&#34; -resize 50% /var/www/pilgrimage.htb/shrunk/&#34;</span> <span class=o>.</span> <span class=nv>$newname</span> <span class=o>.</span> <span class=nv>$mime</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>unlink</span><span class=p>(</span><span class=nv>$upload</span><span class=o>-&gt;</span><span class=na>getFullPath</span><span class=p>());</span>
</span></span></code></pre></div><p>The program seems to be invoking this binary to shrink the image that is being uploaded through the website, the program itself is <code>ImageMagick 7.1.0-49 beta</code> we discover that by invoking it with <code>-version</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./magick -version
</span></span><span class=line><span class=cl>Version: ImageMagick 7.1.0-49 beta Q16-HDRI x86_64 c243c9281:20220911 https://imagemagick.org
</span></span><span class=line><span class=cl>Copyright: <span class=o>(</span>C<span class=o>)</span> <span class=m>1999</span> ImageMagick Studio LLC
</span></span><span class=line><span class=cl>License: https://imagemagick.org/script/license.php
</span></span><span class=line><span class=cl>Features: Cipher DPC HDRI OpenMP<span class=o>(</span>4.5<span class=o>)</span> 
</span></span><span class=line><span class=cl>Delegates <span class=o>(</span>built-in<span class=o>)</span>: bzlib djvu fontconfig freetype jbig jng jpeg lcms lqr lzma openexr png raqm tiff webp x xml zlib
</span></span><span class=line><span class=cl>Compiler: gcc <span class=o>(</span>7.5<span class=o>)</span>
</span></span></code></pre></div><p>This version is vulnerable to Arbitrary Remote Leak, <a href=https://www.metabaseq.com/imagemagick-zero-days/>https://www.metabaseq.com/imagemagick-zero-days/</a>.</p><p>Furthermore, we notice some files of interest in the source code as well, such as the database file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$db</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PDO</span><span class=p>(</span><span class=s1>&#39;sqlite:/var/db/pilgrimage&#39;</span><span class=p>);</span>
</span></span></code></pre></div><h1 id=exploiting>Exploiting<a hidden class=anchor aria-hidden=true href=#exploiting>#</a></h1><p>I&rsquo;ve used this PoC to generate my payload: <a href=https://github.com/Sybil-Scan/imagemagick-lfi-poc>https://github.com/Sybil-Scan/imagemagick-lfi-poc</a></p><p>I&rsquo;ve crafted my malicious image to read the database file <code>/var/db/pilgrimage</code> and shrink it through the website, I&rsquo;ve then downloaded the file and converted the bytes, opened it and after some digging I found the password for user <code>emiliy</code>. Then you can login with <code>ssh</code>.</p><h1 id=getting-root>Getting root<a hidden class=anchor aria-hidden=true href=#getting-root>#</a></h1><p>I&rsquo;ve used <code>linpeas.sh</code> to enumerate the system, and I&rsquo;ve noticed a process running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root         <span class=m>726</span>  0.0  0.0   <span class=m>6816</span>  <span class=m>3072</span> ?        Ss   15:00   0:00 /bin/bash /usr/sbin/malwarescan.sh
</span></span></code></pre></div><p>I checked the permissions of the script:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>emily@pilgrimage:~$ ls -la /usr/sbin/malwarescan.sh
</span></span><span class=line><span class=cl>-rwxr--r-- <span class=m>1</span> root root <span class=m>474</span> Jun  <span class=m>1</span> 19:14 /usr/sbin/malwarescan.sh
</span></span></code></pre></div><p>And then I saw the script itself:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>emily@pilgrimage:~$ cat /usr/sbin/malwarescan.sh
</span></span><span class=line><span class=cl><span class=c1>#!/bin/bash</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>blacklist</span><span class=o>=(</span><span class=s2>&#34;Executable script&#34;</span> <span class=s2>&#34;Microsoft executable&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/usr/bin/inotifywait -m -e create /var/www/pilgrimage.htb/shrunk/ <span class=p>|</span> <span class=k>while</span> <span class=nb>read</span> FILE<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>	<span class=nv>filename</span><span class=o>=</span><span class=s2>&#34;/var/www/pilgrimage.htb/shrunk/</span><span class=k>$(</span>/usr/bin/echo <span class=s2>&#34;</span><span class=nv>$FILE</span><span class=s2>&#34;</span> <span class=p>|</span> /usr/bin/tail -n <span class=m>1</span> <span class=p>|</span> /usr/bin/sed -n -e <span class=s1>&#39;s/^.*CREATE //p&#39;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nv>binout</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>/usr/local/bin/binwalk -e <span class=s2>&#34;</span><span class=nv>$filename</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> banned in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>blacklist</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=nv>$binout</span><span class=s2>&#34;</span> <span class=o>==</span> *<span class=s2>&#34;</span><span class=nv>$banned</span><span class=s2>&#34;</span>* <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>			/usr/bin/rm <span class=s2>&#34;</span><span class=nv>$filename</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>			<span class=nb>break</span>
</span></span><span class=line><span class=cl>		<span class=k>fi</span>
</span></span><span class=line><span class=cl>	<span class=k>done</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>This script seems to be invoking <code>binwalk</code>, I searched for some exploits and I found this one: <a href=https://www.exploit-db.com/exploits/51249>https://www.exploit-db.com/exploits/51249</a> following the steps in the exploit, I&rsquo;ve set up a listener and placed the malicious <code>png</code> crafted by the exploit in the <code>/var/www/pilgrimage.htb/shrunk/</code> directory.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>emily@pilgrimage:/tmp/syl$ cp ./binwalk_exploit.png /var/www/pilgrimage.htb/shrunk/
</span></span></code></pre></div><p>After a couple of seconds, my listener got a connection, which was with <code>root</code> privileges.</p><h1 id=conclusions>Conclusions<a hidden class=anchor aria-hidden=true href=#conclusions>#</a></h1><p>I wanted to investigate a little further how the <code>magick</code> binary includes the file that it converts and this article explains it perfectly.</p><p><a href=https://www.metabaseq.com/imagemagick-zero-days/>https://www.metabaseq.com/imagemagick-zero-days/</a></p><p>The exploit targets the <code>tEXt</code> chunk of the PNG file, and this chunk is being used for storing key-value metadata for the PNG file. The problem comes whenever you use the &ldquo;profile&rdquo; string into that metadata, if that is being used as &ldquo;key&rdquo; the &ldquo;value&rdquo; is being interpreted as a filename, that then the functions <code>FileToStringInfo</code> → <code>FileToBlob</code> will fetch from the system, and it will populate the &ldquo;value&rdquo; with the file&rsquo;s contents.</p><p>And to add some speculation on top of it, this almost feels like a backdoor ;).</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://sy1.sh/tags/hackthebox/>hackthebox</a></li></ul><nav class=paginav><a class=prev href=https://sy1.sh/writeups/htb-topology/><span class=title>« Prev</span><br><span>Hack The Box - Topology [Easy]</span></a>
<a class=next href=https://sy1.sh/writeups/htb-sandworm/><span class=title>Next »</span><br><span>Hack The Box - Sandworm [Medium]</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://sy1.sh>0x73796C31</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod (sy1 modified)</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>